<?php
$board = $this->vars['board'];
$meta = $this->vars['meta'];
$skin = $this->vars['skin'];
?>

<div>
    <?php $default_fields = $board->fields()->getDefaultFields()?>
    <div class="board-fields-wrap">
        <div class="board-fields-message">
            일부 스킨에서는 입력필드 설정이 적용되지 않습니다.
        </div>
        <div class="board-fields-left">
            <h3 class="board-fields-h3">사용 가능한 필드</h3>
            <ul class="board-fields">
                <li class="board-fields-default left">
                    <button type="button" class="board-fields-header">
                        KBoard 기본 필드
                        <span class="fields-up">▲</span>
                        <span class="fields-down">▼</span>
                    </button>
                    <ul class="board-fields-list board-fields-content">
                        <?php foreach($default_fields as $key=>$item):?>
                        <li class="default <?php echo $key?>">
                            <input type="hidden" class="field_data class" value="<?php echo $item['class']?>">
                            <input type="hidden" class="field_data close_button" value="<?php echo isset($item['close_button'])?$item['close_button']:''?>">
                            <div class="board-extends-fields">
                                <div class="board-fields-title toggle board-field-handle">
                                    <button type="button">
                                        <?php echo e($item['field_label'])?>
                                        <span class="fields-up">▲</span>
                                        <span class="fields-down">▼</span>
                                    </button>
                                </div>
                                <div class="board-fields-toggle">
                                    <button type="button" class="fields-remove" title="Remove">X</button>
                                </div>
                            </div>
                            <div class="board-fields-content">
                                <input type="hidden" class="field_data field_type" value="<?php echo e($item['field_type'])?>">
                                <input type="hidden" class="field_data field_label" value="<?php echo e($item['field_label'])?>">
                                <?php if(isset($item['option_field'])):?>
                                <input type="hidden" class="field_data option_field" value="<?php echo e($item['option_field'])?>">
                                <?php endif?>
                                <div class="attr-row">
                                    <label class="attr-name" for="<?php echo $key?>_field_label">필드 레이블</label>
                                    <div class="attr-value">
                                        <input type="text" id="<?php echo $key?>_field_label" class="field_data field_name" placeholder="<?php echo e($item['field_label'])?>">
                                    </div>
                                </div>
                                <?php if(isset($item['roles'])):?>
                                <div class="attr-row">
                                    <label class="attr-name" for="<?php echo $key?>_roles">표시할 권한</label>
                                    <div class="attr-value">
                                        <select id="<?php echo $key?>_roles" class="field_data roles" onchange="board_fields_permission_roles_view(this)">
                                            <option value="all" selected>제한없음</option>
                                            <option value="author">로그인 사용자</option>
                                            <option value="roles">직접선택</option>
                                        </select>

                                    </div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['secret_permission'])):?>
                                <div class="attr-row">
                                    <label class="attr-name" for="<?php echo $key?>_secret">비밀글</label>
                                    <div class="attr-value">
                                        <select id="<?php echo $key?>_secret" class="field_data secret-roles" onchange="board_fields_permission_roles_view(this)">
                                            <option value="all">제한없음</option>
                                            <option value="author"<?php if($item['secret_permission'] == 'author'):?> selected<?php endif?>>로그인 사용자</option>
                                            <option value="roles"<?php if($item['secret_permission'] == 'roles'):?> selected<?php endif?>>직접선택</option>
                                        </select>

                                    </div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['notice_permission'])):?>
                                <div class="attr-row">
                                    <label class="attr-name" for="<?php echo $key?>-notice">공지사항</label>
                                    <div class="attr-value">
                                        <select id="<?php echo $key?>-notice" class="field_data notice-roles" onchange="board_fields_permission_roles_view(this)">
                                            <option value="all">제한없음</option>
                                            <option value="author"<?php if($item['notice_permission'] == 'author'):?> selected<?php endif?>>로그인 사용자</option>
                                            <option value="roles"<?php if($item['notice_permission'] == 'roles'):?> selected<?php endif?>>직접선택</option>
                                        </select>

                                    </div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['default_value'])):?>
                                <div class="attr-row">
                                    <label class="attr-name" for="<?php echo $key?>_default_value">기본값</label>
                                    <div class="attr-value">
                                        <?php if($item['field_type'] == 'search'):?>
                                        <select id="<?php echo $key?>_default_value" class="field_data default_value">
                                            <option value="1">제목과 내용 검색허용</option>
                                            <option value="2">제목만 검색허용 (비밀글)</option>
                                            <option value="3">통합검색 제외</option>
                                        </select>
                                        <?php elseif($item['field_type'] == 'category1'):?>
                                        <?php if($board->initCategory1()):?>
                                        <select id="<?php echo $key?>_default_value" class="field_data default_value">
                                            <option value="">Category Select</option>
                                            <?php while($board->hasNextCategory()):?>
                                            <option value="<?php echo $board->currentCategory()?>"<?php if($item['default_value'] == $board->currentCategory()):?> selected<?php endif?>><?php echo $board->currentCategory()?></option>
                                            <?php endwhile?>
                                        </select>
                                        <?php endif?>
                                        <?php elseif($item['field_type'] == 'category2'):?>
                                        <?php if($board->initCategory2()):?>
                                        <select id="<?php echo $key?>_default_value" class="field_data default_value">
                                            <option value="">Category Select</option>
                                            <?php while($board->hasNextCategory()):?>
                                            <option value="<?php echo $board->currentCategory()?>"<?php if($item['default_value'] == $board->currentCategory()):?> selected<?php endif?>><?php echo $board->currentCategory()?></option>
                                            <?php endwhile?>
                                        </select>
                                        <?php endif?>
                                        <?php else:?>
                                        <input type="text" class="field_data default_value">
                                        <?php endif?>
                                    </div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['placeholder'])):?>
                                <div class="attr-row">
                                    <label class="attr-name" for="<?php echo $key?>_placeholder">Placeholder</label>
                                    <div class="attr-value"><input type="text" id="<?php echo $key?>_placeholder" class="field_data placeholder" value="<?php if(isset($item['placeholder']) && $item['placeholder']):echo $item['placeholder']; endif?>"></div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['description'])):?>
                                <div class="attr-row">
                                    <label class="attr-name" for="<?php echo $key?>_description">설명</label>
                                    <div class="attr-value">
                                        <input type="text" id="<?php echo $key?>_description" class="field_data field_description" value="<?php echo $item['description']?>">
                                    </div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['required']) || isset($item['show_document']) || isset($item['hidden'])):?>
                                <div class="attr-row">
                                    <?php if(isset($item['required'])):?>
                                    <label>
                                        <input type="hidden" class="field_data required" value="">
                                        <input type="checkbox" class="field_data required" value="1"<?php if($item['required']):?> checked<?php endif?>>필수
                                    </label>
                                    <?php endif?>
                                    <?php if(isset($item['show_document'])):?>
                                    <label>
                                        <input type="hidden" class="field_data show_document" value="">
                                        <input type="checkbox" class="field_data show_document" value="1"<?php if($item['show_document']):?> checked<?php endif?>>게시글 본문에 표시
                                    </label>
                                    <?php endif?>
                                    <?php if(isset($item['hidden'])):?>
                                    <label>
                                        <input type="hidden" class="field_data hidden_document" value="">
                                        <input type="checkbox" class="field_data hidden_document" value="1"<?php if($item['hidden']):?> checked<?php endif?>>숨김
                                    </label>
                                    <?php endif?>
                                </div>
                                <?php endif?>
                            </div>
                        </li>
                        <?php endforeach?>
                    </ul>
                </li>
                <li class="board-fields-extension left">
                    <?php $extends_field = $board->fields()->getExtensionFields()?>
                    <button type="button" class="board-fields-header">
                        확장 필드
                        <span class="fields-up">▲</span>
                        <span class="fields-down">▼</span>
                    </button>

                    <ul class="board-fields-list board-fields-content">
                        <?php if($extends_field):?>
                        <?php foreach($extends_field as $key=>$item):?>
                        <li class="extends <?php echo $key?>">
                            <input type="hidden" value="<?php echo $item['class']?>" class="field_data class">
                            <input type="hidden" class="field_data close_button" value="<?php echo isset($item['close_button'])?$item['close_button']:''?>">
                            <div class="board-extends-fields">
                                <div class="board-fields-title toggle board-field-handle">
                                    <button type="button">
                                        <?php echo e($item['field_label'])?>
                                        <span class="fields-up">▲</span>
                                        <span class="fields-down">▼</span>
                                    </button>
                                </div>
                                <div class="board-fields-toggle">
                                    <button type="button" class="fields-remove" title="Remove">X</button>
                                </div>
                            </div>
                            <div class="board-fields-content">
                                <input type="hidden" class="field_data field_type" value="<?php echo e($item['field_type'])?>">
                                <input type="hidden" class="field_data field_label" value="<?php echo e($item['field_label'])?>">
                                <div class="attr-row">
                                    <label class="attr-name">필드 레이블</label>
                                    <div class="attr-value"><input type="text" class="field_data field_name" placeholder="<?php echo e($item['field_label'])?>"></div>
                                </div>
                                <?php if(isset($item['meta_key'])):?>
                                <div class="attr-row">
                                    <label class="attr-name">메타키</label>
                                    <div class="attr-value"><input type="text" class="field_data meta_key" placeholder="meta_key"></div>
                                    <div class="description">※ 입력하지 않으면 자동으로 설정되며 저장 이후에는 값을 변경할 수 없습니다.</div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['row'])):?>
                                <?php $uniq_id = uniqid()?>
                                <div class="board-radio-reset">
                                    <div class="attr-row option-wrap">
                                        <div class="attr-name option">
                                            <label for="<?php echo $uniq_id?>">라벨</label>
                                        </div>
                                        <div class="attr-value">
                                            <input type="text" id="<?php echo $uniq_id?>" class="field_data option_label">
                                            <button type="button" class="<?php echo $item['field_type']?>" onclick="add_option(this)">+</button>
                                            <button type="button" class="<?php echo $item['field_type']?>" onclick="remove_option(this)">-</button>
                                            <label>
                                                <?php if($item['field_type'] == 'checkbox'):?>
                                                <input type="checkbox" name="<?php echo $item['field_type']?>" class="field_data default_value" value="1">
                                                <?php else:?>
                                                <input type="radio" name="<?php echo $item['field_type']?>" class="field_data default_value" value="1">
                                                <?php endif?>
                                                기본값
                                            </label>
                                            <?php if($item['field_type'] == 'radio' || $item['field_type'] == 'select'):?>
                                            <span style="vertical-align:middle;cursor:pointer;" onclick="board_radio_reset(this)">· Reset</span>
                                            <?php endif?>
                                        </div>
                                    </div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['roles'])):?>
                                <div class="attr-row">
                                    <label class="attr-name">표시할 권한</label>
                                    <div class="attr-value">
                                        <select class="field_data roles" onchange="board_fields_permission_roles_view(this)">
                                            <option value="all" selected>제한없음</option>
                                            <option value="author">로그인 사용자</option>
                                            <option value="roles">직접선택</option>
                                        </select>

                                    </div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['default_value']) && !isset($item['row'])):?>
                                <div class="attr-row">
                                    <label class="attr-name">기본값</label>
                                    <div class="attr-value"><input type="text" class="field_data default_value"></div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['placeholder'])):?>
                                <div class="attr-row">
                                    <label class="attr-name">Placeholder</label>
                                    <div class="attr-value"><input type="text" class="field_data placeholder"></div>
                                </div>
                                <?php endif?>
                                <?php if(isset($item['description'])):?>
                                <div class="attr-row">
                                    <label class="attr-name">설명</label>
                                    <div class="attr-value">
                                        <input type="text" class="field_data field_description" value="<?php echo $item['description']?>">
                                    </div>
                                </div>
                                <?php endif?>
                                <div class="attr-row">
                                    <?php if(isset($item['required'])):?>
                                    <input type="hidden" class="field_data required" value="">
                                    <label><input type="checkbox" class="field_data required" value="1">필수</label>
                                    <?php endif?>
                                    <?php if(isset($item['show_document'])):?>
                                    <input type="hidden" class="field_data show_document" value="">
                                    <label><input type="checkbox" class="field_data show_document" value="1">게시글 본문에 표시</label>
                                    <?php endif?>
                                    <?php if(isset($item['hidden'])):?>
                                    <input type="hidden" class="field_data hidden_document" value="">
                                    <label><input type="checkbox" class="field_data hidden_document" value="1">숨김<?php if($item['field_type'] == 'text'):?>(hidden)<?php endif?></label>
                                    <?php endif?>
                                </div>
                            </div>
                        </li>
                        <?php endforeach?>
                        <?php endif?>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="board-fields-right">
            <div class="board-fields board-sortable-fields">
                <h3 class="board-fields-h3">입력 필드 구조</h3>
                <div class="description">왼쪽 열에서 필드를 드래그 앤 드롭으로 추가하세요.</div>
                <ul class="board-skin-fields board-fields-sortable connected-sortable">
                    <?php $fields = $board->fields()->getSkinFields()?>
                    <?php foreach($fields as $key=>$item):?>
                    <?php
							$meta_key = isset($item['meta_key']) && $item['meta_key'] ? $item['meta_key'] : $key;
							$field_label = $board->fields()->getFieldLabel($item);
                    ?>
                    <li class="<?php echo $board->fields()->isDefaultFields($item['field_type'])?> <?php echo e($meta_key)?>">
                        <input type="hidden" class="parent_id" value="<?php echo e($meta_key)?>">
                        <input type="hidden" name="fields[<?php echo e($meta_key)?>][class]" class="field_data class" value="<?php echo $item['class']?>">
                        <input type="hidden" name="fields[<?php echo e($meta_key)?>][close_button]" class="field_data close_button" value="<?php echo isset($item['close_button'])?$item['close_button']:''?>">
                        <div class="board-saved-fields-header">
                            <div class="board-fields-title toggle board-field-handle<?php if(!(isset($item['close_button']) && $item['close_button'] == 'yes')):?> only-toggle<?php endif?>">
                                <button type="button">
                                    <?php echo e($field_label)?>
                                    <?php if(isset($item['field_name']) && $item['field_name']):?>
                                    : <?php echo e($item['field_name'])?>
                                    <?php endif?>
                                    <span class="fields-up">▲</span>
                                    <span class="fields-down">▼</span>
                                </button>
                            </div>
                            <?php if(isset($item['close_button']) && $item['close_button'] == 'yes'):?>
                            <div class="board-fields-toggle">
                                <button type="button" class="fields-remove" title="Remove">X</button>
                            </div>
                            <?php endif?>
                        </div>
                        <div class="board-fields-content">
                            <input type="hidden" name="fields[<?php echo e($meta_key)?>][field_type]" class="field_data field_type" value="<?php echo e($item['field_type'])?>">
                            <input type="hidden" name="fields[<?php echo e($meta_key)?>][field_label]" class="field_data field_label" value="<?php echo e($field_label)?>">
                            <?php if(isset($item['option_field'])):?>
                            <input type="hidden" name="fields[<?php echo e($meta_key)?>][option_field]" class="field_data option_field" value="1">
                            <?php endif?>
                            <?php if(isset($item['hidden'])):?>
                            <input type="text" name="fields[<?php echo e($meta_key)?>][hidden]" class="field_data hidden" value="1">
                            <?php endif?>

                            <?php if($item['field_type'] == 'title'):?>
                            <div class="attr-row">
                                <div class="description">※ 제목은 항상 필수로 입력해야 합니다.</div>
                                <input type="hidden" name="fields[title][permission]" value="all">
                            </div>
                            <?php elseif(in_array($item['field_type'], array('category1', 'category2', 'tree_category'))):?>
                            <div class="attr-row">
                                <div class="description">※ 글 작성 화면에서 표시되지 않는다면 기본설정 페이지에서 카테고리 사용과 카테고리 선택 설정을 확인해보세요.</div>
                            </div>
                            <?php elseif($item['field_type'] == 'author'):?>
                            <div class="attr-row">
                                <div class="description">※ 비회원은 비밀번호를 항상 필수로 입력해야 합니다.</div>
                            </div>
                            <?php elseif($item['field_type'] == 'attach'):?>
                            <div class="attr-row">
                                <div class="description">※ 글 작성 화면에서 표시되지 않는다면 기본설정 페이지에서 최대 첨부파일 개수를 확인해보세요.</div>
                            </div>
                            <?php endif?>

                            <?php if(isset($item['field_name'])):?>
                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>-field-label">필드 레이블</label>
                                <div class="attr-value">
                                    <input type="text" id="<?php echo e($meta_key)?>-field-label" name="fields[<?php echo e($meta_key)?>][field_name]" class="field_data field_name" value="<?php echo e($item['field_name'])?>" placeholder="<?php echo e($field_label)?>">
                                </div>
                            </div>
                            <?php endif?>

                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>">메타키</label>
                                <div class="attr-value">
                                    <input type="text" name="fields[<?php echo e($meta_key)?>][meta_key]" id="<?php echo e($meta_key)?>" class="field_data meta_key" value="<?php echo $meta_key?>"<?php if($meta_key):?> readonly<?php endif?> placeholder="meta_key">
                                </div>
                                <div class="description">※ 입력하지 않으면 자동으로 설정되며 저장 이후에는 값을 변경할 수 없습니다.</div>
                            </div>

                            <?php if(isset($item['row'])):?>
                            <?php if($board->fields()->valueExists($item['row'])):?>
                            <div class="board-radio-reset">
                                <?php $already_echo = false;?>
                                <?php foreach($item['row'] as $option_key=>$option_value):?>
                                <?php if(isset($option_value['label']) && $option_value['label']):?>
                                <div class="attr-row option-wrap">
                                    <div class="attr-name option">
                                        <label for="<?php echo e($option_key)?>_label">라벨</label>
                                    </div>
                                    <div class="attr-value">
                                        <input type="text" id="<?php echo e($option_key)?>_label" name="fields[<?php echo e($meta_key)?>][row][<?php echo e($option_key)?>][label]" id="<?php echo e($meta_key)?>" class="field_data option_label" value="<?php echo e($option_value['label'])?>">
                                        <button type="button" class="<?php echo e($item['field_type'])?>" onclick="add_option(this)">+</button>
                                        <button type="button" class="<?php echo e($item['field_type'])?>" onclick="remove_option(this)">-</button>
                                        <label>
                                            <?php if($item['field_type'] == 'checkbox'):?>
                                            <input type="checkbox" name="fields[<?php echo e($meta_key)?>][row][<?php echo e($option_key)?>][default_value]" class="field_data default_value"<?php if(isset($option_value['default_value']) && $option_value['default_value'] == '1'):?> checked<?php endif?> value="1">
                                            <?php else:?>
                                            <input type="radio" name="fields[<?php echo e($meta_key)?>][default_value]" class="field_data default_value"<?php if(isset($item['default_value']) && $item['default_value']==$option_key):?> checked<?php endif?> value="<?php echo e($option_key)?>">
                                            <?php endif?>
                                            기본값
                                        </label>
                                        <?php if($item['field_type'] == 'radio' || $item['field_type'] == 'select'):?>
                                        <?php if(!$already_echo):?>
                                        <span style="vertical-align:middle;cursor:pointer;" onclick="board_radio_reset(this)">· Reset</span>
                                        <?php $already_echo=true; endif?>
                                        <?php endif?>
                                    </div>
                                </div>
                                <?php endif?>
                                <?php endforeach?>
                            </div>
                            <?php else:?>
                            <?php $uniq_id = uniqid()?>
                            <div class="attr-row option-wrap">
                                <div class="attr-name option">
                                    <label for="<?php echo e($meta_key)?>_label">라벨</label>
                                </div>
                                <div class="attr-value">
                                    <input type="text" id="<?php echo e($meta_key)?>_label" name="fields[<?php echo e($meta_key)?>][row][<?php echo $uniq_id?>][label]" class="field_data option_label" value="">
                                    <button type="button" class="<?php echo e($item['field_type'])?>" onclick="add_option(this)">+</button>
                                    <button type="button" class="<?php echo e($item['field_type'])?>" onclick="remove_option(this)">-</button>
                                    <label>
                                        <?php if($item['field_type'] == 'checkbox'):?>
                                        <input type="checkbox" name="fields[<?php echo e($meta_key)?>][row][<?php echo $uniq_id?>][default_value]" class="field_data default_value" value="">
                                        <?php else:?>
                                        <input type="radio" name="fields[<?php echo e($meta_key)?>][default_value]" class="field_data default_value" value="">
                                        <?php endif?>
                                        기본값
                                    </label>
                                </div>
                            </div>
                            <?php endif?>
                            <?php endif?>
                            <?php if(isset($item['permission']) && $item['field_type'] != 'title'):?>
                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>_permission">표시할 권한</label>
                                <div class="attr-value">
                                    <?php if($item['field_type'] == 'author'):?>
                                    <select id="<?php echo e($meta_key)?>_permission" name="fields[<?php echo e($meta_key)?>][permission]" class="field_data roles">
                                        <option value="">비회원일때만 표시</option>
                                        <option value="always_visible"<?php if($item['permission'] == 'always_visible'):?> selected<?php endif?>>항상 표시</option>
                                        <option value="always_hide"<?php if($item['permission'] == 'always_hide'):?> selected<?php endif?>>항상 숨김</option>
                                    </select>
                                    <?php else:?>
                                    <select id="<?php echo e($meta_key)?>_permission" name="fields[<?php echo e($meta_key)?>][permission]" class="field_data roles" onchange="board_fields_permission_roles_view(this)">
                                        <option value="all"<?php if($item['permission'] == 'all'):?> selected<?php endif?>>제한없음</option>
                                        <option value="author"<?php if($item['permission'] == 'author'):?> selected<?php endif?>>로그인 사용자</option>
                                        <option value="roles"<?php if($item['permission'] == 'roles'):?> selected<?php endif?>>직접선택</option>
                                    </select>

                                    <?php endif?>
                                </div>
                            </div>
                            <?php endif?>
                            <?php if(isset($item['secret_permission'])):?>
                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>_secret">비밀글</label>
                                <div class="attr-value">
                                    <select id="<?php echo e($meta_key)?>_secret" name="fields[option][secret_permission]" class="field_data roles" onchange="board_fields_permission_roles_view(this)">
                                        <option value="all"<?php if($item['secret_permission'] == 'all'):?> selected<?php endif?>>제한없음</option>
                                        <option value="author"<?php if($item['secret_permission'] == 'author'):?> selected<?php endif?>>로그인 사용자</option>
                                        <option value="roles"<?php if($item['secret_permission'] == 'roles'):?> selected<?php endif?>>직접선택</option>
                                    </select>

                                </div>
                            </div>
                            <?php endif?>
                            <?php if(isset($item['notice_permission'])):?>
                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>_notice">공지사항</label>
                                <div class="attr-value">
                                    <select id="<?php echo e($meta_key)?>_notice" name="fields[option][notice_permission]" class="field_data roles" onchange="board_fields_permission_roles_view(this)">
                                        <option value="all"<?php if($item['notice_permission'] == 'all'):?> selected<?php endif?>>제한없음</option>
                                        <option value="author"<?php if($item['notice_permission'] == 'author'):?> selected<?php endif?>>로그인 사용자</option>
                                        <option value="roles"<?php if($item['notice_permission'] == 'roles'):?> selected<?php endif?>>직접선택</option>
                                    </select>

                                </div>
                            </div>
                            <?php endif?>
                            <?php if(isset($item['default_value']) && $item['field_type'] != 'checkbox' && $item['field_type'] != 'radio' && $item['field_type'] != 'select' && $item['field_type'] != 'ip'):?>
                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>_default_value">기본값</label>
                                <div class="attr-value">
                                    <?php if($item['field_type'] == 'search'):?>
                                    <select id="<?php echo e($meta_key)?>_default_value" name="fields[search][default_value]" class="field_data default_value">
                                        <option value="1"<?php if($item['default_value'] == '1'):?> selected<?php endif?>>제목과 내용 검색허용</option>
                                        <option value="2"<?php if($item['default_value'] == '2'):?> selected<?php endif?>>제목만 검색허용 (비밀글)</option>
                                        <option value="3"<?php if($item['default_value'] == '3'):?> selected<?php endif?>>통합검색 제외</option>
                                    </select>
                                    <?php elseif($item['field_type'] == 'category1'):?>
                                    <?php if($board->initCategory1()):?>
                                    <select id="<?php echo e($meta_key)?>_default_value" name="fields[category1][default_value]" class="field_data default_value">
                                        <option value="">Category Select</option>
                                        <?php while($board->hasNextCategory()):?>
                                        <option value="<?php echo $board->currentCategory()?>"<?php if($item['default_value'] == $board->currentCategory()):?> selected<?php endif?>><?php echo $board->currentCategory()?></option>
                                        <?php endwhile?>
                                    </select>
                                    <?php endif?>
                                    <?php elseif($item['field_type'] == 'category2'):?>
                                    <?php if($board->initCategory2()):?>
                                    <select id="<?php echo e($meta_key)?>_default_value" name="fields[category2][default_value]" class="field_data default_value">
                                        <option value="">Category Select</option>
                                        <?php while($board->hasNextCategory()):?>
                                        <option value="<?php echo $board->currentCategory()?>"<?php if($item['default_value'] == $board->currentCategory()):?> selected<?php endif?>><?php echo $board->currentCategory()?></option>
                                        <?php endwhile?>
                                    </select>
                                    <?php endif?>
                                    <?php else:?>
                                    <input type="text" id="<?php echo e($meta_key)?>_default_value" name="fields[<?php echo e($meta_key)?>][default_value]" class="field_data default_value" value="<?php echo $item['default_value']?>">
                                    <?php endif?>
                                </div>
                            </div>
                            <?php endif?>
                            <?php if(isset($item['placeholder'])):?>
                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>_placeholder">Placeholder</label>
                                <div class="attr-value"><input type="text" id="<?php echo e($meta_key)?>_placeholder" name="fields[<?php echo e($meta_key)?>][placeholder]" class="field_data placeholder" value="<?php echo e($item['placeholder'])?>"></div>
                            </div>
                            <?php endif?>
                            <?php if(isset($item['description'])):?>
                            <div class="attr-row">
                                <label class="attr-name" for="<?php echo e($meta_key)?>_description">설명</label>
                                <div class="attr-value">
                                    <input type="text" id="<?php echo e($meta_key)?>_description" name="fields[<?php echo e($meta_key)?>][description]" class="field_data field_description" value="<?php echo e($item['description'])?>">
                                </div>
                            </div>
                            <?php endif?>
                            <?php if(isset($item['show_document'])):?>
                            <div class="attr-row">
                                <label class="attr-name">스킨 출력 예제</label>
                                <div class="attr-value">
                                    <div class="example">
                                        <?php
											if($board->fields()->isDefaultFields($item['field_type']) == 'extends' || (isset($item['option_field']) && $item['option_field'])){
                                        if($item['field_type'] == 'file'){
                                        $print_code = '<?php echo $content->attach->{\'' . $meta_key . '\'}[1]?>';
                                        }
                                        else if($item['field_type'] == 'checkbox'){
                                        $print_code = '<?php echo implode(\', \', $content->option->{\'' . $meta_key . '\'})?>';
                                        }
                                        else{
                                        $print_code = '<?php echo $content->option->{\'' . $meta_key . '\'}?>';
                                        }
                                        }
                                        echo e($print_code);
                                        ?>
                                    </div>
                                </div>
                            </div>
                            <?php endif?>
                            <?php if(isset($item['required']) || isset($item['show_document']) || isset($item['hidden'])):?>
                            <div class="attr-row">
                                <?php if(isset($item['required'])):?>
                                <label>
                                    <input type="hidden" name="fields[<?php echo e($meta_key)?>][required]" class="field_data required" value="">
                                    <input type="checkbox" name="fields[<?php echo e($meta_key)?>][required]" class="field_data required" value="1"<?php if($item['required']):?> checked<?php endif?>>필수
                                </label>
                                <?php endif?>
                                <?php if(isset($item['show_document'])):?>
                                <label>
                                    <input type="hidden" name="fields[<?php echo e($meta_key)?>][show_document]" class="field_data show_document" value="">
                                    <input type="checkbox" name="fields[<?php echo e($meta_key)?>][show_document]" class="field_data show_document" value="1"<?php if($item['show_document']):?> checked<?php endif?>>게시글 본문에 표시
                                </label>
                                <?php endif?>
                                <?php if(isset($item['hidden'])):?>
                                <label>
                                    <input type="hidden" name="fields[<?php echo e($meta_key)?>][hidden]" class="field_data hidden_document" value="">
                                    <input type="checkbox" name="fields[<?php echo e($meta_key)?>][hidden]" class="field_data hidden_document" value="1"<?php if($item['hidden']):?> checked<?php endif?>>숨김<?php if($item['field_type'] == 'text'):?>(hidden)<?php endif?>
                                </label>
                                <?php endif?>
                            </div>
                            <?php endif?>
                        </div>
                    </li>
                    <?php endforeach?>
                </ul>
                <div class="description btn-group-sm">에러가 나거나 설정이 잘못됐다면 <button type="button" class="btn btn-primary" onclick="board_skin_fields_reset()">초기화</button> 해주세요.</div>
            </div>
        </div>
    </div>
</div>

